<%inherit file="main.html" />

<%def name="title()">Admin Groups - ${parent.title()}</%def>

<%def name="head()">
<style>
    textarea {
        width: 300px;
    }
</style>
</%def>

<%def name="top_of_head()">
</%def>

<%def name="scripts()">
<script src="/static/blue_common/scripts/jquery.form.js"></script>
<script type="text/javascript"> 
</script>
</%def>

<%def name="body_classes()">admin_groups ${parent.body_classes()}</%def>
<%def name="container()">
<h1 class="header">Enterprise Partner: <span>${username}</span></h1>
<div class="recenter">
<div class="division">
${parent.progressbar()}
</div>

% if saved:
<p id="saved" class="bigger" style="display:none">Changes saved successfully!</p>
% endif
</div>
<div id="" class="section">
<h2>Create New Admin Group</h2>
<form action="${reverse('blue_mgnt:admin_groups')}" enctype="multipart/form-data" method="post">
    <table class="table" style="max-width:100%">
        <tr>
        %for field in new_admin_group.visible_fields():
            <td>
                ${field.label_tag()}
                ${field}
            %if field.errors:
                <br />
                %for error in field.errors:
                    <span class="errors">
                            ${error}
                    </span>
                %endfor
            %endif
            </td>

        %endfor
            <td style="padding-top:30px">
                <input type='submit' value="+ New Admin Group" class="btn btn-primary">
            </td>
        </tr>
    </table>
    <input type='hidden' value='new_admin_group' name='form'>
    %for hidden in new_admin_group.hidden_fields():
        ${hidden}
    %endfor
</form>
</div>
<div class="section" style="clear:both">
    <h2 style="float:left">Admin Groups</h2>
<form action="${reverse('blue_mgnt:admin_groups')}" method="post" action="" style="clear:both">
${admin_groups.management_form}
<table id="groups" class="table" style="max-width:100%">
    <thead>
        <tr class="bigger">
            <th>Name</th>
            <th>LDAP DN</th>
            <th>Permissions</th>
            <th>Delete Group</th>
        </tr>
    </thead>
    <tbody>
        % if admin_groups.non_form_errors():
        <tr><td colspan="5" style="color:#FF0000; font-size:1.3em">${admin_groups.non_form_errors()}</td> </tr>
        % endif
        % for form in admin_groups.forms:
        <tr>
            % for x, field in enumerate(form.visible_fields()):
            <td>
                % if not x:
                    % for hidden in form.hidden_fields():
                    ${hidden}
                    % endfor
                % endif
                % if field.name == 'DELETE':
                    <span class="del_box">${field}</span>
                % else:
                    ${field}
                    %if field.errors:
                        <br />
                        %for error in field.errors:
                            <span class="table_errors">
                                ${error}
                            </span>
                        %endfor
                    %endif
                %endif
            </td>
            % endfor
        </tr>
        % endfor
    </tbody>
</table>
<div style="text-align:center">
    <input type='submit' value="Save Changes" class="btn btn-primary">
    <input type='hidden' value='management' name='form'>
</div>
</form>
</div>
</%def>
